{% extends "base.html" %}
{% load static %}

{% block title %}Pagrindinis{% endblock %}

<style>
    /* Your existing styles */
</style>

{% block content %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        var thumbnails = document.querySelectorAll('.color-thumbnail');
        thumbnails.forEach(function(thumbnail) {
            thumbnail.addEventListener('click', function() {
                var imageUrl = this.dataset.imageUpload || this.src;
                changeImage(imageUrl);
            });
        });
    });

    function changeImage(imageUrl) {
        console.log('Changing image to:', imageUrl); // Debugging line
        var selectedImage = document.getElementById('selected-image');
        if (selectedImage) {
            selectedImage.src = imageUrl;
        } else {
            console.log('Selected image element not found'); // Debugging line
        }
    }
</script>

<div class="container my-4">
    <h1 class="my-4 text-center">Product Colors</h1>
    <div class="row mb-4">
        <div class="col-md-12">
            <div id="main-image" class="text-center mb-4">
                <!-- Use image_upload by default if available -->
                <img id="selected-image"
                     src="{% if first_product.image_upload %}{{ first_product.image_upload.url }}{% else %}{{ first_product.image.url }}{% endif %}"
                     class="img-fluid"
                     style="width: 400px; height: 500px;"
                     alt="Selected Color">
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="card shadow-sm">
                <div class="card-body">
                    <div class="color-thumbnails d-flex flex-wrap">
                        {% for product in flowers_data %}
                        <div class="thumbnail-container" style="margin: 5px;">
                            <img src="{{ product.image.url }}"
                                 class="color-thumbnail"
                                 data-image-upload="{% if product.image_upload %}{{ product.image_upload.url }}{% else %}{{ product.image.url }}{% endif %}"
                                 style="max-width: 100px; height: auto; cursor: pointer;"
                                 alt="{{ product.color }}">
                            <p class="color-label">{{ product.color }}</p>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}